name: Keep Bot Alive
on:
  schedule:
    - cron: '*/5 * * * *'  # –ö–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç
  workflow_dispatch:  # –ú–æ–∂–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å –≤—Ä—É—á–Ω—É—é

jobs:
  ping:
    runs-on: ubuntu-latest
    timeout-minutes: 5  # –õ–∏–º–∏—Ç –≤—Ä–µ–º–µ–Ω–∏
    
    steps:
    - name: Ping Telegram Bot
      run: |
        echo "üöÄ –ù–∞—á–∏–Ω–∞—é –ø–∏–Ω–≥ –±–æ—Ç–∞..."
        echo "–í—Ä–µ–º—è –∑–∞–ø—É—Å–∫–∞: $(date)"
        
        # –ü—Ä–æ—Å—Ç–æ –ø–∏–Ω–≥—É–µ–º –±–µ–∑ —Å–ª–æ–∂–Ω—ã—Ö –ø—Ä–æ–≤–µ—Ä–æ–∫
        STATUS=$(curl -s -o /dev/null -w "%{http_code}" --max-time 10 "https://one23123123123-te31.onrender.com" || echo "CURL_FAILED")
        
        echo "–°—Ç–∞—Ç—É—Å HTTP: $STATUS"
        
        # –õ—é–±–æ–π –æ—Ç–≤–µ—Ç –∫—Ä–æ–º–µ —Ç–∞–π–º–∞—É—Ç–∞ - —ç—Ç–æ —É—Å–ø–µ—Ö
        if [[ "$STATUS" == "CURL_FAILED" ]]; then
          echo "‚ö†Ô∏è  –ë–æ—Ç –Ω–µ –æ—Ç–≤–µ—Ç–∏–ª, –≤–æ–∑–º–æ–∂–Ω–æ —Å–ø–∏—Ç"
          exit 0  # –í—ã—Ö–æ–¥–∏–º —Å —É—Å–ø–µ—Ö–æ–º —á—Ç–æ–±—ã workflow –Ω–µ –ø–∞–¥–∞–ª
        else
          echo "‚úÖ –ë–æ—Ç –æ—Ç–≤–µ—Ç–∏–ª —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º $STATUS"
        fi
        
        echo "‚úÖ –ü–∏–Ω–≥ –∑–∞–≤–µ—Ä—à–µ–Ω –≤ $(date)"
